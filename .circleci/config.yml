version: 2
jobs:
  build:
    working_directory: ~/circleci-demo-java-spring
    docker:
      - image: circleci/openjdk:8-jdk-browsers
    steps:
      - checkout
      - run:
          name: Download Java CLIs
          command: |
            wget https://stormrunner-load.saas.hpe.com/external/storm-cli/storm_runner_java_cli.zip
           
      - run:  
          name: Run StormRunner Test
          command: |
            unzip storm_runner_java_cli.zip
            java -jar cli.jar runWithResult testId=922 connect=Anushree.Nagar@mheducation.com:P@ssw0rd@Oct2018@https://stormrunner-load.saas.hpe.com tenant=949194025:109 sendEmail=True

            
      - run: 
          name: Fetch Test Status from Performance Dashboard
          command: |   
            cd /tmp
            wget http://awsci.mheducation.com/artifactory/webapp/#/artifacts/browse/tree/General/Build-Repo/com/mhe/Perf-Dashboard/Collectors/batch-job/target/batch-job-0.0.8.jar
            ls -l
